% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/statistics.R
\name{juveniles_by_group}
\alias{juveniles_by_group}
\title{Calculation of juvenile percentage by groups}
\usage{
juveniles_by_group(
  data,
  group_cols,
  cols_length,
  juvLim = 12,
  a = 0.0012,
  b = 3.1242,
  remove_empty = TRUE
)
}
\arguments{
\item{data}{Data frame with length frequency data.}

\item{group_cols}{Vector of column names to group the data.}

\item{cols_length}{Vector of column names or indices that contain the
length frequencies. Can be names with patterns like "pond_X", "length_X" or "X".}

\item{juvLim}{length limit to consider juveniles (default 12 cm).}

\item{a}{Coefficient of the length-weight relationship (default 0.0012).}

\item{b}{Exponent of the length-weight relationship (default 3.1242).}

\item{remove_empty}{Logical. If TRUE (default), removes groups
without data (total_number = 0).}
}
\value{
Data frame with the following fields:
\itemize{
\item Grouping columns specified in group_cols
\item perc_juv_number: Percentage of juveniles in number
\item perc_juv_weight: Percentage of juveniles in weight
\item total_number: Total number of individuals in the group
\item total_weight: Total weight in the group
}
}
\description{
Calculates the percentage of juveniles by specified groups, both in number and
in weight. Uses a modern approach with dplyr to process the data and calculate
the proportions of juveniles based on length frequencies.
}
\examples{
# Load sample data
data(calas_bitacora, faenas_bitacora, tallas_bitacora)

# Process data
data_hauls <- process_hauls(data_hauls = calas_bitacora)
data_fishing_trips <- process_fishing_trips(data_fishing_trips = faenas_bitacora)
hauls_length <- process_length(data_length = tallas_bitacora)

# Integrate data
data_length_fishing_trips <- merge(x = data_fishing_trips, y = hauls_length, by = 'fishing_trip_code')
data_total <- merge_length_fishing_trips_hauls(data_hauls = data_hauls,
                                       data_length_fishing_trips = data_length_fishing_trips)
final_data <- add_variables(data_total)

# Define length columns
length_cols <- c("8", "8.5", "9", "9.5", "10", "10.5", "11", "11.5",
                 "12", "12.5", "13", "13.5", "14", "14.5", "15")

# Weight length
results <- weight_length_df(df = final_data,
                               length_cols = length_cols,
                               catch_col = "catch_ANCHOVETA",
                               a = 0.0001,
                               b = 2.984)

# Add date column for grouping
results$unique_date <- convert_to_date(results$start_date_haul, type = "date")

# Calculate juveniles by date
results_by_date <- juveniles_by_group(
  data = results,
  group_cols = "unique_date",
  cols_length = paste0("pond_", length_cols),
  juvLim = 12,
  a = 0.0012,
  b = 3.1242
)

# Calculate juveniles by date and distance to coast
results_date_dc <- juveniles_by_group(
  data = results,
  group_cols = c("unique_date", "dc_cat"),
  cols_length = paste0("pond_", length_cols),
  juvLim = 12,
  a = 0.0012,
  b = 3.1242
)

# View results
head(results_by_date)
}
